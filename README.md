# netecho
报文回射服务，同时支持TCP/UDP，支持多并发

【项目初衷】：现在的这家公司在做一个网络加速器，就是通过云服务厂家的骨干网加速实现更低延时的
访问国外的服务器，由于数据需要经过多个节点，为了测出分段节点的延时，故开发此报文
回射服务器，通过和客户端的配合，实现时延的计算。

计算思路为，假设网络经过 本地->国内A->...->国外X->目标服务器，那么久可以通过在
国内A->...->国外X部署该服务，分别计算出本地到国内A->...->国外X的延迟，再通过
简单的减法计算，计算出分段的延迟，为后续的网络环境的评估提供参考数据。

【项目优势】相信很多学网络编程的人一开始写的就是报文回射程序，
这个项目实现的也是同样的功能，但在简单回射服务的基础上添加了：
1.同时支持TCP/UDP
2.支持多并发
3.高可用
4.提供详细的日志记录
5.代码架构清晰

【代码结构】
主程序代码位于nettest.c，main进来后读取配置文件，
开启子进程监听UDP端口，进入udpProc处理udp报文，
父进程监听TCP端口，每过来一个连接就开启一个子进程进入tcpProc
处理该连接，在tcp/udp的处理程序里面都只是简单的接收报文，并回传
收到的报文，但有个例外，如果收到的报文里面包含“TEST”字符串，
则会回传客户端的IP地址（本机电脑的外网出口地址）

【安装方法】
编译：在最上层的目录直接make，会自动遍历子目录寻找Makefile进行编译，编译结束后会在$HOME/bin/
下生成目标文件，目标文件名和目录名同
运行方法：将nettest.ini拷贝至$HOME/etc/目录，运行程序即可，$HOME/etc/nettest.ini是在命令中
没有指定配置文件时的缺省配置文件，你也可以通过命令行自己指定配置文件，如 nettest -f mycfg.ini
日志：运行后将在$HOME/log生成以日期为后缀的日志文件，日志文件隔天自动重新生成

【配置文件】
Debug       3   //日志级别，1 error 2 fatal 3 debug
LogFile     $HOME/log/nettest.%Y%m%d  //日志文件
HostPort    7788    //端口
TimeOut     5  //接收超时控制，目前程序在接收超时后会继续接收，可根据需要改变接收超时的行为，如断开连接

【备注】
lib_s下的代码为上家公司开发工具库，非本人自己编写，感谢上位领导在技术方面提供的诸多指导
